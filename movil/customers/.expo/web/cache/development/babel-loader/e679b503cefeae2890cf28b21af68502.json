{"ast":null,"code":"import * as React from 'react';\nimport formatWithMask from \"./formatWithMask\";\nexport default (function (props) {\n  var value = props.value,\n      mask = props.mask,\n      onChangeText = props.onChangeText,\n      _props$placeholderFil = props.placeholderFillCharacter,\n      placeholderFillCharacter = _props$placeholderFil === void 0 ? '_' : _props$placeholderFil,\n      obfuscationCharacter = props.obfuscationCharacter,\n      showObfuscatedValue = props.showObfuscatedValue;\n  var maskArray = React.useMemo(function () {\n    return typeof mask === 'function' ? mask(value) : mask;\n  }, [mask, value]);\n  var formattedValueResult = React.useMemo(function () {\n    return formatWithMask({\n      text: value || '',\n      mask: mask,\n      obfuscationCharacter: obfuscationCharacter\n    });\n  }, [mask, obfuscationCharacter, value]);\n  var maskHasObfuscation = React.useMemo(function () {\n    return maskArray && !!maskArray.find(function (maskItem) {\n      return Array.isArray(maskItem);\n    });\n  }, [maskArray]);\n  var isValueObfuscated = React.useMemo(function () {\n    return !!maskHasObfuscation && !!showObfuscatedValue;\n  }, [maskHasObfuscation, showObfuscatedValue]);\n  var handleChangeText = React.useCallback(function (text) {\n    var textToFormat = text;\n\n    if (isValueObfuscated) {\n      textToFormat = formattedValueResult.masked || '';\n\n      if (textToFormat.length > text.length) {\n        textToFormat = textToFormat.slice(0, -1);\n      } else if (textToFormat.length < text.length) {\n        textToFormat = textToFormat + text[text.length - 1];\n      }\n    }\n\n    var result = formatWithMask({\n      text: textToFormat,\n      mask: mask,\n      obfuscationCharacter: obfuscationCharacter\n    });\n    onChangeText && onChangeText(result.masked, result.unmasked, result.obfuscated);\n  }, [isValueObfuscated, mask, obfuscationCharacter, onChangeText, formattedValueResult.masked]);\n  var defaultPlaceholder = React.useMemo(function () {\n    if (maskArray) {\n      return maskArray.map(function (maskChar) {\n        if (typeof maskChar === 'string') {\n          return maskChar;\n        } else {\n          return placeholderFillCharacter;\n        }\n      }).join('');\n    } else {\n      return undefined;\n    }\n  }, [maskArray, placeholderFillCharacter]);\n  var inputValue = isValueObfuscated ? formattedValueResult.obfuscated : formattedValueResult.masked;\n  return {\n    onChangeText: handleChangeText,\n    value: inputValue,\n    selection: isValueObfuscated ? {\n      start: inputValue.length,\n      end: inputValue.length\n    } : undefined,\n    placeholder: defaultPlaceholder\n  };\n});","map":{"version":3,"sources":["useMaskedInputProps.tsx"],"names":["props","placeholderFillCharacter","showObfuscatedValue","maskArray","React","mask","formattedValueResult","formatWithMask","text","value","obfuscationCharacter","maskHasObfuscation","maskItem","Array","isValueObfuscated","handleChangeText","textToFormat","result","onChangeText","defaultPlaceholder","maskChar","inputValue","selection","start","end","length","placeholder"],"mappings":"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","sourcesContent":["import * as React from 'react';\n\nimport formatWithMask from './formatWithMask';\nimport type { Mask } from './formatWithMask.types';\n\ntype UseMaskedInputProps = {\n  value: string;\n  mask?: Mask;\n  onChangeText?(masked: string, unmasked: string, obfuscated: string): void;\n  showObfuscatedValue?: boolean;\n  placeholderFillCharacter?: string;\n  obfuscationCharacter?: string;\n};\n\nexport default (props: UseMaskedInputProps) => {\n  const {\n    value,\n    mask,\n    onChangeText,\n    placeholderFillCharacter = '_',\n    obfuscationCharacter,\n    showObfuscatedValue,\n  } = props;\n\n  const maskArray = React.useMemo(\n    () => (typeof mask === 'function' ? mask(value) : mask),\n    [mask, value]\n  );\n\n  const formattedValueResult = React.useMemo(() => {\n    return formatWithMask({ text: value || '', mask, obfuscationCharacter });\n  }, [mask, obfuscationCharacter, value]);\n\n  const maskHasObfuscation = React.useMemo(\n    () => maskArray && !!maskArray.find((maskItem) => Array.isArray(maskItem)),\n    [maskArray]\n  );\n\n  const isValueObfuscated = React.useMemo(\n    () => !!maskHasObfuscation && !!showObfuscatedValue,\n    [maskHasObfuscation, showObfuscatedValue]\n  );\n\n  const handleChangeText = React.useCallback(\n    (text: string) => {\n      let textToFormat = text;\n\n      if (isValueObfuscated) {\n        textToFormat = formattedValueResult.masked || '';\n\n        if (textToFormat.length > text.length) {\n          textToFormat = textToFormat.slice(0, -1);\n        } else if (textToFormat.length < text.length) {\n          textToFormat = textToFormat + text[text.length - 1];\n        }\n      }\n\n      const result = formatWithMask({ text: textToFormat, mask, obfuscationCharacter });\n\n      onChangeText && onChangeText(result.masked, result.unmasked, result.obfuscated);\n    },\n    [\n      isValueObfuscated,\n      mask,\n      obfuscationCharacter,\n      onChangeText,\n      formattedValueResult.masked,\n    ]\n  );\n\n  const defaultPlaceholder = React.useMemo(() => {\n    if (maskArray) {\n      return maskArray\n        .map((maskChar) => {\n          if (typeof maskChar === 'string') {\n            return maskChar;\n          } else {\n            return placeholderFillCharacter;\n          }\n        })\n        .join('');\n    } else {\n      return undefined;\n    }\n  }, [maskArray, placeholderFillCharacter]);\n\n  const inputValue = isValueObfuscated\n    ? formattedValueResult.obfuscated\n    : formattedValueResult.masked;\n\n  return {\n    onChangeText: handleChangeText,\n    value: inputValue,\n    selection: isValueObfuscated\n      ? { start: inputValue.length, end: inputValue.length }\n      : undefined,\n    placeholder: defaultPlaceholder,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}